<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Loup-Garou</title>
  <link rel="stylesheet" href="/static/game.css">
</head>

<body>
  <div id="app" class="game-app">
    <canvas id="fxCanvas"></canvas>

    <!-- Connection status indicator -->
    <div id="connStatus" class="conn-dot"></div>

    <!-- SCREEN: Join -->
    <div id="screenJoin" class="screen screen-join">
      <div class="screen-content">
        <div class="game-logo">ğŸº</div>
        <h1>Loup-Garou</h1>
        <p class="subtitle">Rejoins la partie</p>
        <input type="text" id="nameInput" placeholder="Ton prÃ©nom" maxlength="24" autocomplete="off">
        <button id="joinBtn" class="btn-primary">Entrer dans le village</button>
      </div>
    </div>

    <!-- SCREEN: Waiting (lobby) -->
    <div id="screenWaiting" class="screen screen-waiting" style="display:none;">
      <div class="screen-content">
        <div class="waiting-icon">â³</div>
        <h2>En attente</h2>
        <p>La partie va bientÃ´t commencerâ€¦</p>
        <div id="playerCount" class="player-count">0 joueurs</div>
      </div>
    </div>

    <!-- SCREEN: Role Reveal -->
    <div id="screenRole" class="screen screen-role" style="display:none;">
      <div class="screen-content">
        <p class="hint">Touche pour rÃ©vÃ©ler ton rÃ´le</p>
        <div id="roleCard" class="role-card" tabindex="0">
          <div class="role-card-inner">
            <div class="role-card-back">
              <img id="cardBackImg" src="/static/cards/verso.jpg" alt="?">
              <span class="tap-hint">ğŸ‘†</span>
            </div>
            <div class="role-card-front">
              <img id="cardFrontImg" src="/static/cards/villager.jpg" alt="Role">
              <div id="roleName" class="role-name">â€”</div>
            </div>
          </div>
        </div>
        <p id="roleHint" class="role-hint"></p>
      </div>
    </div>

    <!-- SCREEN: Night - Waiting -->
    <div id="screenNightWait" class="screen screen-night" style="display:none;">
      <div class="screen-content">
        <div class="night-icon">ğŸŒ™</div>
        <h2>La nuit tombe</h2>
        <p id="nightWaitMsg">Ferme les yeux et attendsâ€¦</p>
      </div>
    </div>

    <!-- SCREEN: Night - Action (pick targets) -->
    <div id="screenNightAction" class="screen screen-night-action" style="display:none;">
      <div class="screen-content">
        <h2 id="actionTitle">Action</h2>
        <p id="actionSubtitle" class="subtitle">Choisis une cible</p>
        <div id="actionTimer" class="action-timer"></div>

        <div id="targets" class="target-grid">
          <!-- Targets inserted here -->
        </div>

        <button id="confirmActionBtn" class="btn-primary" style="display:none;">Confirmer</button>
      </div>
    </div>

    <!-- SCREEN: Day -->
    <div id="screenDay" class="screen screen-day" style="display:none;">
      <div class="screen-content">
        <div class="day-icon">â˜€ï¸</div>
        <h2>Le jour se lÃ¨ve</h2>
        <p id="dayMsg" class="subtitle">Discutez entre vous...</p>
        <div id="dayTimer" class="day-timer"></div>
      </div>
    </div>

    <!-- SCREEN: Vote -->
    <div id="screenVote" class="screen screen-vote" style="display:none;">
      <div class="screen-content">
        <h2>âš–ï¸ Vote du village</h2>
        <p class="subtitle">Qui doit Ãªtre Ã©liminÃ© ?</p>
        <div id="voteTimer" class="vote-timer"></div>

        <div id="voteTargets" class="target-grid">
          <!-- Vote targets -->
        </div>

        <div id="voteStatus" class="vote-status"></div>
      </div>
    </div>

    <!-- SCREEN: Result -->
    <div id="screenResult" class="screen screen-result" style="display:none;">
      <div class="screen-content">
        <div class="result-icon">ğŸ“£</div>
        <h2>RÃ©sultat du vote</h2>
        <div id="resultMsg" class="subtitle">â€”</div>

        <button id="continueBtn" class="btn-primary">Continuer</button>
      </div>
    </div>

    <!-- SCREEN: Game Over -->
    <div id="screenGameOver" class="screen screen-gameover" style="display:none;">
      <div class="screen-content">
        <div class="gameover-icon">ğŸ†</div>
        <h2>Fin de partie</h2>
        <div id="winnerMsg" class="subtitle">â€”</div>

        <button id="backToJoinBtn" class="btn-primary">Nouvelle partie</button>
      </div>
    </div>

    <!-- SCREEN: Dead -->
    <div id="screenDead" class="screen screen-dead" style="display:none;">
      <div class="screen-content">
        <div class="dead-icon">ğŸ’€</div>
        <h2>Tu es mort</h2>
        <p class="subtitle">Observe en silenceâ€¦</p>
      </div>
    </div>

    <!-- Floating role button (mini card) -->
    <button id="roleBtn" class="role-btn" style="display:none;" aria-label="Voir mon rÃ´le">
      <img id="roleBtnImg" src="/static/cards/verso.jpg" alt="Role">
    </button>

    <!-- Lover heart icon (stealth) -->
    <div id="loverHeart" class="lover-heart" style="display:none;">ğŸ’•</div>

    <!-- Lover reveal overlay -->
    <div id="loverReveal" class="lover-reveal" aria-hidden="true">
      <div class="lover-reveal-content">
        <div class="lover-reveal-icon">ğŸ’•</div>
        <div id="loverRevealName" class="lover-reveal-name"></div>
      </div>
    </div>

    <!-- Hold-to-reveal overlay (centered role while holding) -->
    <div id="rolePeek" class="role-peek" aria-hidden="true">
      <div class="role-peek-card">
        <img id="rolePeekImg" src="/static/cards/verso.jpg" alt="Mon rÃ´le">
      </div>
      <div id="rolePeekName" class="role-peek-name"></div>
    </div>

    <!-- Modal for reveals -->
    <div id="modal" class="modal">
      <div class="modal-content">
        <h3 id="modalTitle"></h3>
        <div id="modalBody"></div>
        <button id="modalClose" class="btn-secondary">OK</button>
      </div>
    </div>
  </div>

  <script src="/static/game.js"></script>
</body>

</html>