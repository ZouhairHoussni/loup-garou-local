<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loup-Garou - Game Master</title>
  <link rel="stylesheet" href="/static/tv-game.css">
</head>

<body>
  <div class="tv-app" id="tvApp">
    <canvas id="fxCanvas"></canvas>

    <!-- ==================== LOBBY SCREEN ==================== -->
    <div id="screenLobby" class="screen active">
      <!-- QR Code - Top Left -->
      <div class="qr-zone" id="qrZone">
        <div class="qr-frame">
          <canvas id="qrCanvas" width="100" height="100"></canvas>
        </div>
        <div class="qr-info">
          <div class="qr-label">REJOINDRE</div>
          <code id="joinUrl">http://...</code>
        </div>
      </div>

      <!-- Title - Top Center -->
      <div class="lobby-title">
        <span class="torch">ğŸ”¥</span>
        <div class="title-text">
          <div class="crest">ğŸº</div>
          <h1>LOUP-GAROU</h1>
          <p>de Thiercelieux</p>
        </div>
        <span class="torch">ğŸ”¥</span>
      </div>

      <!-- Config Button - Top Right (like chronicle) -->
      <div class="config-btn" id="configBtn">âš™ï¸</div>

      <!-- Main Area - Players Circle with Start Button in Center -->
      <div class="lobby-main">
        <div class="village-circle">
          <div class="players-ring" id="playersRing"></div>
          <!-- Center: Player count that becomes start button -->
          <div class="village-center" id="startZone">
            <div class="player-count-btn" id="playerCountBtn">
              <span class="count" id="playerCount">0</span>
              <span class="label">VILLAGEOIS</span>
              <span class="start-hint" id="startHint">5 min. requis</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ==================== CONFIG PANEL (Sidebar like Chronicle) ==================== -->
    <div class="config-panel" id="configPanel">
      <div class="config-header">
        <span>âš™ï¸ Configuration</span>
        <button id="closeConfig">âœ•</button>
      </div>
      <div class="config-body">
        <!-- Timers -->
        <div class="config-section">
          <h3>â±ï¸ DurÃ©es</h3>
          <div class="config-grid">
            <div class="config-item">
              <label>Nuit</label>
              <select id="cfgNightMin">
                <option value="1" selected>1 min</option>
                <option value="2">2 min</option>
                <option value="3">3 min</option>
              </select>
            </div>
            <div class="config-item">
              <label>Discussion</label>
              <select id="cfgDayMin">
                <option value="1" selected>1 min</option>
                <option value="2">2 min</option>
                <option value="3">3 min</option>
                <option value="5">5 min</option>
              </select>
            </div>
            <div class="config-item">
              <label>Vote</label>
              <select id="cfgVoteMin">
                <option value="1" selected>1 min</option>
                <option value="2">2 min</option>
              </select>
            </div>
            <div class="config-item">
              <label>RÃ©sultats</label>
              <select id="cfgResultSec">
                <option value="15">15 sec</option>
                <option value="30" selected>30 sec</option>
                <option value="45">45 sec</option>
              </select>
            </div>
          </div>
        </div>
        
        <!-- Roles with Card Images -->
        <div class="config-section">
          <h3>ğŸ­ RÃ´les</h3>
          <div class="roles-grid-config">
            <div class="role-card-config active" data-role="seer">
              <input type="checkbox" id="cfgRoleSeer" checked>
              <div class="role-card-img">
                <img src="/static/cards/voyante.jpg" alt="Voyante">
                <div class="check-overlay">âœ“</div>
              </div>
              <span class="role-card-name">Voyante</span>
            </div>
            <div class="role-card-config active" data-role="witch">
              <input type="checkbox" id="cfgRoleWitch" checked>
              <div class="role-card-img">
                <img src="/static/cards/sorcerer.jpg" alt="SorciÃ¨re">
                <div class="check-overlay">âœ“</div>
              </div>
              <span class="role-card-name">SorciÃ¨re</span>
            </div>
            <div class="role-card-config active" data-role="cupid">
              <input type="checkbox" id="cfgRoleCupid" checked>
              <div class="role-card-img">
                <img src="/static/cards/cupidon.jpg" alt="Cupidon">
                <div class="check-overlay">âœ“</div>
              </div>
              <span class="role-card-name">Cupidon</span>
            </div>
            <div class="role-card-config disabled" data-role="hunter">
              <input type="checkbox" id="cfgRoleHunter" disabled>
              <div class="role-card-img">
                <img src="/static/cards/hunter.jpg" alt="Chasseur">
                <span class="coming-badge">BientÃ´t</span>
              </div>
              <span class="role-card-name">Chasseur</span>
            </div>
          </div>
        </div>

        <button id="applyConfigBtn" class="btn-apply">âœ“ Appliquer</button>
      </div>
    </div>

    <!-- ==================== NIGHT SCREEN ==================== -->
    <div id="screenNight" class="screen">
      <div class="night-container">
        <div class="moon">ğŸŒ™</div>
        <h2 class="phase-title">Nuit <span id="nightNumber">1</span></h2>
        <p class="phase-subtitle" id="nightAction">Le village s'endort...</p>
        <div class="big-timer" id="nightTimer">--</div>
        <div class="sleeping-village" id="sleepingVillage"></div>
      </div>
    </div>

    <!-- ==================== DAWN SCREEN ==================== -->
    <div id="screenDawn" class="screen">
      <div class="dawn-container">
        <div class="sun-rising">
          <div class="sun">â˜€ï¸</div>
        </div>
        <h2 class="dawn-title">L'aube se lÃ¨ve...</h2>
        <div class="death-theater" id="deathTheater">
          <div class="deaths-row" id="deathsRow"></div>
        </div>
        <div class="no-death" id="noDeath" style="display:none;">
          <div class="miracle-icon">âœ¨</div>
          <p>Personne n'est mort cette nuit!</p>
        </div>
      </div>
    </div>

    <!-- ==================== DAY SCREEN ==================== -->
    <div id="screenDay" class="screen day-mode">
      <div class="day-container">
        <div class="sun-icon">â˜€ï¸</div>
        <h2 class="phase-title">Jour <span id="dayNumber">1</span></h2>
        <p class="phase-subtitle">Le village dÃ©bat...</p>
        <div class="big-timer gold" id="dayTimer">--</div>
      </div>
    </div>

    <!-- ==================== VOTE SCREEN ==================== -->
    <div id="screenVote" class="screen day-mode">
      <div class="vote-container">
        <h2 class="phase-title">âš–ï¸ Vote du village</h2>
        <div class="big-timer" id="voteTimer">--</div>
        <div class="vote-status" id="voteStatus">0 / 0 votes</div>
        <div class="vote-grid" id="voteGrid"></div>
      </div>
    </div>

    <!-- ==================== EXECUTION SCREEN ==================== -->
    <div id="screenExecution" class="screen day-mode">
      <div class="execution-container">
        <h2 class="phase-title">Le verdict est tombÃ©</h2>
        <div class="condemned-card" id="condemnedCard">
          <img id="condemnedImg" src="/static/cards/verso.jpg" alt="">
        </div>
        <div class="condemned-name" id="condemnedName">???</div>
        <div class="condemned-role" id="condemnedRole">???</div>
        <div class="vote-tally" id="voteTally"></div>
      </div>
    </div>

    <!-- ==================== GAME OVER SCREEN ==================== -->
    <div id="screenGameOver" class="screen">
      <div class="gameover-container">
        <div class="victory-banner" id="victoryBanner">
          <div class="victory-icon" id="victoryIcon">ğŸ†</div>
          <h1 class="victory-title" id="victoryTitle">Victoire!</h1>
          <p class="victory-team" id="victoryTeam">...</p>
        </div>
        <div class="final-reveal">
          <h3>RÃ‰VÃ‰LATION FINALE</h3>
          <div class="all-roles" id="allRoles"></div>
        </div>
        <div class="gameover-buttons">
          <button id="replayBtn" class="btn-replay">ğŸ”„ Rejouer (mÃªmes joueurs)</button>
          <button id="resetBtn" class="btn-newgame">ğŸ†• Nouvelle Partie</button>
        </div>
      </div>
    </div>

    <!-- ==================== GRAVEYARD ==================== -->
    <div class="graveyard" id="graveyard">
      <div class="graveyard-header">
        <span class="grave-icon">ğŸª¦</span>
        <span>CIMETIÃˆRE (<span id="deadCount">0</span>)</span>
      </div>
      <div class="graveyard-tombs" id="graveyardTombs">
        <div class="empty-grave">Aucune Ã¢me... pour l'instant</div>
      </div>
    </div>

    <!-- ==================== NARRATOR PANEL ==================== -->
    <div class="narrator-btn" id="narratorBtn">ğŸ“œ</div>
    <div class="narrator-panel" id="narratorPanel">
      <div class="narrator-header">
        <span>ğŸ“œ Chroniques du Village</span>
        <button id="closeNarrator">âœ•</button>
      </div>
      <div class="narrator-scroll" id="narratorLog"></div>
    </div>

    <!-- ==================== CONNECTION STATUS ==================== -->
    <div class="connection-status" id="connStatus">
      <span class="status-dot"></span>
      <span class="status-text">Connexion...</span>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="/static/tv-game.js"></script>
</body>

</html>